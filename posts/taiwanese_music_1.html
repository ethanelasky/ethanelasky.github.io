<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ethan Elasky">
<meta name="dcterms.date" content="2023-12-29">
<meta name="description" content="Fresh songs from across the planet">

<title>Notes on Taiwanese Indie Music – Ethan Elasky</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-91d696f6faebeab30d6accf8a547436a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Ethan Elasky</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../posts.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ethanelasky"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/elaskyethan"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Notes on Taiwanese Indie Music</h1>
</div>

<div>
  <div class="description">
    Fresh songs from across the planet
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ethan Elasky </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 29, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Since leaving Taiwan, I’ve delved into the island’s indie music scene, taking recommendations mainly from PTT (Taiwan’s Reddit equivalent), my friend Yang Lee, and the Spotify algorithm. The selections I’ve listed below are eclectic, ranging from siren-like female vocals over jazz piano to poppy, guitar-heavy satire of Japanese magical girl anime. Taiwan’s alternative scene is not merely derivative of Japan’s, the West’s, or anywhere else’s—the music is creative and unique, reminding me of the enormity and potential of what’s still out there to discover.</p>
<p>Note: Translations are mine. Search for songs using the Chinese name if available. I made <a href="https://open.spotify.com/playlist/2GTvo88QMO0ohpefCClJI6?si=4d0fc99d1a444252">a Spotify playlist</a> with every song in this reflection, plus many more.</p>
<section id="hello-nico" class="level3">
<h3 class="anchored" data-anchor-id="hello-nico">Hello Nico</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://taiwanbeats.tw/wp-content/uploads/2019/11/45292632_2028529947193786_2197073082701578240_o.jpg" class="img-fluid figure-img"></p>
<figcaption>Image source: Taiwan Beats</figcaption>
</figure>
</div>
<p>Hello Nico is not a loud band, but their songs are no less powerful because of it. The lyrics take the form of recollections, looking doubtfully at past decisions. Their lead singer’s soft voice makes for good “sad” music, but they have lots of optimistic music that is at least as good. Selections:</p>
<ul>
<li><p>Flower/Hua 花 is a slow, apologetic contemplation of what could have been, had the speaker not unintentionally hurt Hua (a pet name for the subject). <a href="https://open.spotify.com/track/3wsrAPGfAsFOPwsU46l5Vm?si=9a68958947b24fbe">Spotify</a>, <a href="https://www.youtube.com/watch?v=BlblBvpVgjE">YouTube</a></p></li>
<li><p>Unfamiliar Room, Unfamiliar Afternoon 陌生的房間陌生的下午 describes the pain of naively continuing an unreciprocated love. <a href="https://open.spotify.com/track/31BGdCvAt3SNBzgtDbEqRg?si=a7b5d542e491472b">Spotify</a>, <a href="https://www.youtube.com/watch?v=UX8nRhZV-W0">YouTube</a></p></li>
<li><p>Facing Yourself 面向自己 exemplifies “breathiness” in Taiwanese music (which is popular in the Japanese scene) and intelligently uses myriad color and light-based metaphors to describe the uniqueness of the speaker’s romantic interest. <a href="https://open.spotify.com/track/0JhpzFv4v5wVnu2rZCMn5h?si=83c4e1c3714142bb">Spotify</a>, <a href="https://m.youtube.com/watch?v=WX-9BoIuEUk&amp;pp=ygUHI-iNkuiVqg%3D%3D">YouTube</a></p></li>
</ul>
</section>
<section id="iruka-porisu-aka-dolphin-police-イルカポリス-海豚刑警" class="level3">
<h3 class="anchored" data-anchor-id="iruka-porisu-aka-dolphin-police-イルカポリス-海豚刑警">Iruka Porisu (aka Dolphin Police, イルカポリス, 海豚刑警)</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pica.zhimg.com/v2-2eaa033fb89741f7258a82d4dd609835_r.jpg?source=172ae18b" class="img-fluid figure-img"></p>
<figcaption>Image source: Zhihu</figcaption>
</figure>
</div>
<p>Iruka Porisu’s 2019 album Call Me When Night Go Blue is one of my favorites of 2023. Songs effortlessly mesh the lead singer Wuyue’s (伍悅) siren-like voice, intense guitar solos, and unconventional instruments such as a kid’s piano. Their music, lyrics, social media profiles, and videos embody youth—irreverent, chaotic, and joyful—and remind me to enjoy mine while it lasts. Check out their music videos, which I’ve linked below.</p>
<p>Selections:</p>
<ul>
<li><p>Lights of Anping 安平之光 describes blithely riding a Vespa around Anping, Tainan (a city in the south of Taiwan), away from depressing Taipei. <a href="https://open.spotify.com/track/5vW8NkquQ1WgJUtyS7pwJx?si=35d1a9a8b5e5410e">Spotify</a>, <a href="https://youtu.be/ZrpZB8-VBD0?si=i67yOTFIXKyImhOV">Youtube</a></p></li>
<li><p>Tell Me I Was in Your Dream 當ㄋ沉睡ㄉ時候告訴婐ㄋ夢到ㄌ婐 is an enthralling song about love and longing in a relationship with a pessimist. <a href="https://open.spotify.com/track/3zLdMtVS1ku6ACHDGy1oXi?si=49f9e896380b4810">Spotify</a>, <a href="https://www.youtube.com/watch?v=4v_qdAXu5p4">YouTube</a>, <a href="https://www.youtube.com/watch?v=hgt9UkQz6k8">YouTube acoustic</a></p></li>
<li><p>Young Folks Die Late (original song title is in English) is full of harmonic tension and discusses the previous night’s sexual partner for misunderstanding the speaker. <a href="https://open.spotify.com/track/4olMBqpE3xKbmgc4s2WOGl?si=cde8c30b53d84347">Spotify</a>, <a href="https://youtu.be/q8I0Ahl2y2c?si=EHAi2UMomAPkWDI_">YouTube</a></p></li>
<li><p>Badminton Youth 羽球少年 describes the speaker’s romantic frustrations with men, women, and the available partners in her environment, especially those available on Tinder. <a href="https://open.spotify.com/track/7rAMxhio3gkeUzn5HoUMmo?si=c265f9962485465d">Spotify</a>, <a href="https://www.youtube.com/watch?v=LRYSMEvOc0g">YouTube</a></p></li>
</ul>
</section>
<section id="elephant-gym-大象體操" class="level3">
<h3 class="anchored" data-anchor-id="elephant-gym-大象體操">Elephant Gym (大象體操)</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://taiwanbeats.tw/wp-content/uploads/2021/11/IMG2875-768x512.jpeg" class="img-fluid figure-img"></p>
<figcaption>Image source: Taiwan Beats</figcaption>
</figure>
</div>
<p>Within my first month in Taiwan, shortly after discovering Elephant Gym on PTT, I saw them perform at an annual memorial concert that raises awareness for the <a href="https://en.wikipedia.org/wiki/February_28_incident">228 Incident</a>, an anti-government uprising in 1948 that was violently suppressed by the Chiang Kai-shek regime. Recently, they’ve skyrocketed in popularity in the West and have even been selected as the cover image for Spotify’s global math rock playlist. The trio expertly combines melodies with polyrhythms on guitar, base, and drums, and sometimes even adds in female vocals. Words rarely appear on tracks, and when they do, they are sparing. Hence, I have omitted descriptions of lyrics for this artist.</p>
<p>They’re currently on their World Tour. If anyone is interested in seeing the Los Angeles or San Francisco shows, I have tickets to both.</p>
<p>Selections:</p>
<ul>
<li><p>Midway 中途 <a href="https://open.spotify.com/track/2Bt3eNSRuYmbrLETXSdnrQ?si=T8YYWyLMT1m49yPUnpWKKA&amp;nd=1&amp;dlsi=ebdb6c90ec4347ef">Spotify</a>, <a href="https://youtu.be/lIBGM7uYNfs?si=sM4v9DGttOfisL97">YouTube</a></p></li>
<li><p>Go Through the Night 穿過夜晚 <a href="https://open.spotify.com/track/3BkWm5yGQ91hu1b9BHNbaz?si=CaJKD0fAQwe3wZYb7CFr4A&amp;nd=1&amp;dlsi=4ea7a485d32a42e8">Spotify</a>, <a href="https://youtu.be/-WGaDoOlHwo?si=cTo6zNh9FQI9Xi85">YouTube</a></p></li>
<li><p>Underwater 水底 <a href="https://open.spotify.com/track/5kh9pDPnkZgp1birESwLRn?si=IXZxwr4fTmez6qung8pZtw&amp;nd=1&amp;dlsi=63f047fda2a54ad5">Spotify</a>, <a href="https://www.youtube.com/watch?v=jDDy-Vh55to">YouTube</a></p></li>
</ul>
</section>
<section id="sweet-john-甜約翰" class="level3">
<h3 class="anchored" data-anchor-id="sweet-john-甜約翰">Sweet John (甜約翰)</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://static.wixstatic.com/media/2e9a39_dbd3566003094ef48600d4b4422780fb~mv2_d_5472_3648_s_4_2.jpg/v1/fill/w_1752,h_1142,al_c,q_90,usm_0.66_1.00_0.01/2e9a39_dbd3566003094ef48600d4b4422780fb~mv2_d_5472_3648_s_4_2.webp" class="img-fluid figure-img"></p>
<figcaption>Image source: Musictalk</figcaption>
</figure>
</div>
<p>Sweet John makes love songs that are introverted in character and content. The music is largely absent of the hysteria and bold proclamations typical of the genre, an interviewer <a href="https://blog.pinkoi.com/tw/interviews/jq6mlq8h/">noted</a> in early 2020. Their lyrics instead provide a more realistic treatment of feelings like the anxiety inherent to an ambiguous relationship and of falling out of love in a relationship.</p>
<p>Selections:</p>
<ul>
<li><p>The Chance of Rainfall 降雨機率 has gotten universal acclaim from everyone I’ve shown it to thus far. “Why can’t Americans make more songs like this?” was my dad’s reaction. Its jazz-inspired instrumentals are as strong as its duet vocals and makes a great introduction to this genre. <a href="https://open.spotify.com/track/3OS5IhOdUFyXzhZvuNCjgN?si=6255da935ca5460e">Spotify</a>, <a href="https://www.youtube.com/watch?v=3UYOS8Pcsks">YouTube</a></p></li>
<li><p>Safety Limit 安全範圍 weaves dramatic guitar riffs and drum rhythms together with a violin part and the singers’ more delicate voices. <a href="https://open.spotify.com/track/0TMkc0N4NlnaEC6HlLPqpf?si=92098712a22540c1">Spotify</a>, <a href="https://www.youtube.com/watch?v=IhKMtzaAHxA">YouTube</a></p></li>
<li><p>Spark Fades 容易被厭倦的時刻 ponders the longevity of the speaker’s relationship with his significant other. It begins simply with vocals and piano but gradually evolves into an intense guitar and drum-driven climax. <a href="https://open.spotify.com/track/1LYdQTvJRRYlkj7hZq0VVT?si=8576b617473a4b07">Spotify</a>, <a href="https://www.youtube.com/watch?v=UuYiB4Inykc">YouTube</a></p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ethanelasky\.github\.io\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>